import{a as h}from"./authGuard-C2GFzsuy.js";import{S as w}from"./logoutHandler-XduYXRLY.js";h();const i=new w,g=new URLSearchParams(window.location.search),m=g.get("author");let C=localStorage.getItem("name");m?(f(m),y(m)):console.error("Error: No author specified in the URL.");async function f(t){try{const e=await i.getUserProfileByAuthor(t);console.log("Fetched profile:",e),E(e.data)}catch(e){console.error("Error fetching profile:",e)}}function E(t){const e=document.getElementById("view-profile");if(!e){console.error("Error: #view-profile not found in DOM");return}e.innerHTML="";const n=document.createElement("div");n.className="profile-info-container";const o=document.createElement("img");o.src=t.avatar?.url,o.alt=t.avatar?.alt||`${t.name}'s avatar`,o.className="profile-avatar";const c=document.createElement("h1");c.textContent=t.name;const r=document.createElement("div");r.className="followers-posts-count";const a=document.createElement("p");a.textContent=`Posts: ${t._count?.posts}`;const l=document.createElement("p");l.textContent=`Followers: ${t._count?.followers}`;const u=document.createElement("p");u.textContent=`Following: ${t._count?.following}`;let p=t.followers?.some(d=>d.name===C);const s=document.createElement("button");s.id="follow-button",s.textContent=p?"Unfollow":"Follow",s.addEventListener("click",async()=>{s.disabled=!0;try{p?await i.unfollowUser(t.name):await i.followUser(t.name),await f(t.name)}catch(d){console.error("Error updating follow status:",d),alert("Something went wrong. Try again.")}finally{s.disabled=!1}}),e.appendChild(n),n.append(o,c),e.appendChild(r),r.append(a,l,u),e.appendChild(s)}async function y(t){try{const e=await i.getAllPostsByAuthor(t);console.log("Fetched posts:",e),v(e.data)}catch(e){console.error("Error fetching posts:",e)}}function v(t){const e=document.getElementById("view-posts-grid");if(!e){console.error("Error: #view-posts-grid not found in DOM");return}if(e.innerHTML="",!Array.isArray(t)||t.length===0){e.innerHTML="<p>No blog posts available.</p>";return}t.forEach(n=>{const o=document.createElement("div");o.className="container";const c=document.createElement("a");c.href=`../../post/?id=${n.id}`;const r=document.createElement("img");r.src=n.media?.url,r.alt=n.media?.alt||`${n.title}'s image`,r.className="post-image";const a=document.createElement("h2");a.textContent=n.title,a.className="post-title";const l=document.createElement("p");l.textContent=n.body,l.className="post-description",o.appendChild(r),o.appendChild(c),o.appendChild(a),o.appendChild(l),e.appendChild(o)})}
