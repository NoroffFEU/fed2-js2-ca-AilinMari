import{a as h}from"./authGuard-C2GFzsuy.js";import{S as E}from"./logoutHandler-XduYXRLY.js";h();let p=new E;const g=localStorage.getItem("name"),f=await p.getUserProfile(g);function w(e){const t=document.getElementById("profileInfo"),n=document.getElementById("editProfileButton"),o=document.createElement("h1");o.textContent=e.data.name;const d=document.createElement("div");d.className="profile-info-container";const a=document.createElement("div");a.className="edit-profile-container";const c=document.createElement("img");c.src=e.data.avatar.url,c.alt=e.data.avatar.alt||`${e.name}'s avatar`,c.className="profile-avatar";const r=document.createElement("div");r.className="followers-posts-count";const i=document.createElement("p");i.textContent=`Posts: ${e.data._count.posts}`;const l=document.createElement("p");l.textContent=`Followers: ${e.data._count.followers}`;const s=document.createElement("p");s.textContent=`Following: ${e.data._count.following}`,t.appendChild(d),d.append(c,o),t.appendChild(r),r.append(i,l,s),t.appendChild(a),a.appendChild(n)}w(f);async function y(e){try{const t=await p.getPostsByLoggedInUser(e);console.log("Fetched posts:",t),N(t.data)}catch(t){console.error("Error fetching posts:",t)}}function N(e){const t=document.getElementById("profileFeed");if(!t){console.error("Error: #profileFeed not found in DOM");return}if(t.innerHTML="",!Array.isArray(e)||e.length===0){t.innerHTML="<p>No blog posts available.</p>";return}e.forEach(n=>{const o=document.createElement("div");o.className="container";const d=document.createElement("a");d.href=`../../post/?id=${n.id}`;const a=document.createElement("img");a.src=n.media.url,a.alt=n.media.alt||`${n.title}'s image`,a.className="post-image";const c=document.createElement("div");c.className="image-container";const r=document.createElement("h2");r.textContent=n.title,r.className="post-title";const i=document.createElement("p");i.textContent=n.body,i.className="post-description";const l=document.createElement("div");l.className="user-buttons";const s=document.createElement("div");s.className="content-container";const m=document.createElement("button");m.textContent="Edit Post",m.className="edit-post-button",m.onclick=()=>{window.location.href=`../../post/edit/?id=${n.id}`};const u=document.createElement("button");u.textContent="Delete Post",u.className="delete-post-button",u.onclick=async()=>{if(confirm("Are you sure you want to delete this post?"))try{await p.deletePost(n.id),alert("Post deleted successfully."),window.location.reload()}catch(C){console.error("Error deleting post:",C),alert("Failed to delete post. Please try again.")}},c.appendChild(a),o.appendChild(c),o.appendChild(s),o.appendChild(d),s.appendChild(r),s.appendChild(i),o.appendChild(l),l.appendChild(m),l.appendChild(u),t.appendChild(o)})}y(f);
