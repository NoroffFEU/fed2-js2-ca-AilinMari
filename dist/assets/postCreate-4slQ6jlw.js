import{S as u}from"./logoutHandler-XduYXRLY.js";import{a as d}from"./authGuard-C2GFzsuy.js";const s=new u;async function g(){const e=localStorage.getItem("token");if(!e){alert("You must be logged in to create a post."),window.location.href="/auth/login/";return}if(!await s.getUser(e)){alert("You must be logged in to create a post."),window.location.href="/auth/login/";return}}const r=document.getElementById("create-post-form");r&&r.addEventListener("submit",async e=>{e.preventDefault();const o=document.getElementById("post-title").value.trim(),i=document.getElementById("post-body").value.trim(),a=document.getElementById("post-tags").value.trim(),n=document.getElementById("post-image-url").value.trim(),c=document.getElementById("post-image-alt").value.trim()||"Image",l=a?a.split(",").map(t=>t.trim()):[],m=n?{url:n,alt:c}:null;try{const t=await s.createPost(o,i,l,m);console.log("Post created successfully:",t),window.location.href="/post/?id="+t.data.id}catch(t){console.error("Error creating post:",t),alert("Failed to create post. Please try again.")}});d();const p=document.forms.createPost;p.addEventListener("submit",g);
